<template>
  <Container class="disari-container">
    <Row class="disari-row">
      <Column lg="6" md="6" sm="4">
        <h1>
          Åžu an dÄ±ÅŸarÄ± Ã§Ä±kabilir miyim? ðŸ¤”
        </h1>
        <div class="disari-form">
          <Combobox
            :items="city"
            locale="tr-TR"
            v-model="selectedCity"
            :error="cityError"
            :message="cityErrorMessage"
            label="YaÅŸadÄ±ÄŸÄ±nÄ±z Åžehir"
          />
          <Input
            type="number"
            placeholder="YaÅŸÄ±nÄ±z"
            label="YaÅŸÄ±nÄ±z"
            v-model="age"
            :error="ageError"
            :message="ageErrorMessage"
            style="margin-bottom: 20px; margin-top: 20px;"
          />
        </div>
        <div class="disari-submit">
          <Button type="primary" @click="formClick">Kontrol Et</Button>
        </div>

        <h5 style="text-align: center; margin-bottom: 5px; margin-top: 70px;">
          <a href="https://www.linkedin.com/in/canturker/" target="_black">
            ACT
          </a>
          ve
          <a
            href="https://www.linkedin.com/in/oguzhankarabulut/"
            target="_blank"
            >OK</a
          >
          tarafÄ±ndan ðŸ˜‚ðŸ˜‚ðŸ˜‚ðŸ˜‚ eÅŸliÄŸinde yapÄ±lmÄ±ÅŸtÄ±r
        </h5>
        <h5 style="margin-bottom: 10px;text-align: center;">
          <a href="https://cdn.adverport.com/sertifika.png" target="_blank">
            Lysol ortaklÄ±ÄŸÄ± ile TEGV'e destekte bulunulmuÅŸtur.
          </a>
        </h5>
      </Column>
      <div class="credits"></div>
    </Row>
  </Container>
</template>

<script>
import {
  Button,
  Container,
  Row,
  Combobox,
  Column,
  Input,
  ButtonGroup
} from "kunodo";
import moment from "moment";
export default {
  components: { Button, Container, Row, Column, Combobox, Input, ButtonGroup },
  data() {
    return {
      workStatus: 2,
      age: "",
      ageCalculated: 0,
      ageError: false,
      ageErrorMessage: "",
      cityError: false,
      cityErrorMessage: "",
      selectedCity: "",
      // risk level 1 to 4, 1 low level 4 highest
      JSON: {
        1: {
          age: {
            20: {
              day: {
                funday: "evet",
                sunday: "evet"
              }
            },
            65: {
              day: {
                funday: "evet",
                sunday: "evet"
              }
            },
            other: {
              day: {
                funday: "evet",
                sunday: "evet"
              }
            }
          }
        },
        2: {
          age: {
            20: {
              day: {
                funday: "evet",
                sunday: "evet"
              }
            },
            65: {
              day: {
                funday: "evet",
                sunday: "evet"
              }
            },
            other: {
              day: {
                funday: "evet",
                sunday: "evet"
              }
            }
          }
        },
        3: {
          age: {
            20: {
              day: {
                funday: "evet",
                sunday: "hayir"
              }
            },
            65: {
              day: {
                funday: "evet",
                sunday: "hayir"
              }
            },
            other: {
              day: {
                funday: "evet",
                sunday: "hayir"
              }
            }
          }
        },
        4: {
          age: {
            20: {
              day: {
                funday: "evet",
                sunday: "hayir"
              }
            },
            65: {
              day: {
                funday: "evet",
                sunday: "hayir"
              }
            },
            other: {
              day: {
                funday: "evet",
                sunday: "hayir"
              }
            }
          }
        }
      },
      city: [
        {
          name: "-",
          value: 0
        },
        {
          name: "ADANA",
          value: "1"
        },
        {
          name: "ADIYAMAN",
          value: "2"
        },
        {
          name: "AFYONKARAHÄ°SAR",
          value: "3"
        },
        {
          name: "AÄžRI",
          value: "4"
        },
        {
          name: "AMASYA",
          value: "5"
        },
        {
          name: "ANKARA",
          value: "6"
        },
        {
          name: "ANTALYA",
          value: "7"
        },
        {
          name: "ARTVÄ°N",
          value: "8"
        },
        {
          name: "AYDIN",
          value: "9"
        },
        {
          name: "BALIKESÄ°R",
          value: "10"
        },
        {
          name: "BÄ°LECÄ°K",
          value: "11"
        },
        {
          name: "BÄ°NGÃ–L",
          value: "12"
        },
        {
          name: "BÄ°TLÄ°S",
          value: "13"
        },
        {
          name: "BOLU",
          value: "14"
        },
        {
          name: "BURDUR",
          value: "15"
        },
        {
          name: "BURSA",
          value: "16"
        },
        {
          name: "Ã‡ANAKKALE",
          value: "17"
        },
        {
          name: "Ã‡ANKIRI",
          value: "18"
        },
        {
          name: "Ã‡ORUM",
          value: "19"
        },
        {
          name: "DENÄ°ZLÄ°",
          value: "20"
        },
        {
          name: "DÄ°YARBAKIR",
          value: "21"
        },
        {
          name: "EDÄ°RNE",
          value: "22"
        },
        {
          name: "ELAZIÄž",
          value: "23"
        },
        {
          name: "ERZÄ°NCAN",
          value: "24"
        },
        {
          name: "ERZURUM",
          value: "25"
        },
        {
          name: "ESKÄ°ÅžEHÄ°R",
          value: "26"
        },
        {
          name: "GAZÄ°ANTEP",
          value: "27"
        },
        {
          name: "GÄ°RESUN",
          value: "28"
        },
        {
          name: "GÃœMÃœÅžHANE",
          value: "29"
        },
        {
          name: "HAKKARÄ°",
          value: "30"
        },
        {
          name: "HATAY",
          value: "31"
        },
        {
          name: "ISPARTA",
          value: "32"
        },
        {
          name: "MERSÄ°N",
          value: "33"
        },
        {
          name: "Ä°STANBUL",
          value: "34"
        },
        {
          name: "Ä°ZMÄ°R",
          value: "35"
        },
        {
          name: "KARS",
          value: "36"
        },
        {
          name: "KASTAMONU",
          value: "37"
        },
        {
          name: "KAYSERÄ°",
          value: "38"
        },
        {
          name: "KIRKLARELÄ°",
          value: "39"
        },
        {
          name: "KIRÅžEHÄ°R",
          value: "40"
        },
        {
          name: "KOCAELÄ°",
          value: "41"
        },
        {
          name: "KONYA",
          value: "42"
        },
        {
          name: "KÃœTAHYA",
          value: "43"
        },
        {
          name: "MALATYA",
          value: "44"
        },
        {
          name: "MANÄ°SA",
          value: "45"
        },
        {
          name: "KAHRAMANMARAÅž",
          value: "46"
        },
        {
          name: "MARDÄ°N",
          value: "47"
        },
        {
          name: "MUÄžLA",
          value: "48"
        },
        {
          name: "MUÅž",
          value: "49"
        },
        {
          name: "NEVÅžEHÄ°R",
          value: "50"
        },
        {
          name: "NÄ°ÄžDE",
          value: "51"
        },
        {
          name: "ORDU",
          value: "52"
        },
        {
          name: "RÄ°ZE",
          value: "53"
        },
        {
          name: "SAKARYA",
          value: "54"
        },
        {
          name: "SAMSUN",
          value: "55"
        },
        {
          name: "SÄ°Ä°RT",
          value: "56"
        },
        {
          name: "SÄ°NOP",
          value: "57"
        },
        {
          name: "SÄ°VAS",
          value: "58"
        },
        {
          name: "TEKÄ°RDAÄž",
          value: "59"
        },
        {
          name: "TOKAT",
          value: "60"
        },
        {
          name: "TRABZON",
          value: "61"
        },
        {
          name: "TUNCELÄ°",
          value: "62"
        },
        {
          name: "ÅžANLIURFA",
          value: "63"
        },
        {
          name: "UÅžAK",
          value: "64"
        },
        {
          name: "VAN",
          value: "65"
        },
        {
          name: "YOZGAT",
          value: "66"
        },
        {
          name: "ZONGULDAK",
          value: "67"
        },
        {
          name: "AKSARAY",
          value: "68"
        },
        {
          name: "BAYBURT",
          value: "69"
        },
        {
          name: "KARAMAN",
          value: "70"
        },
        {
          name: "KIRIKKALE",
          value: "71"
        },
        {
          name: "BATMAN",
          value: "72"
        },
        {
          name: "ÅžIRNAK",
          value: "73"
        },
        {
          name: "BARTIN",
          value: "74"
        },
        {
          name: "ARDAHAN",
          value: "75"
        },
        {
          name: "IÄžDIR",
          value: "76"
        },
        {
          name: "YALOVA",
          value: "77"
        },
        {
          name: "KARABÃœK",
          value: "78"
        },
        {
          name: "KÄ°LÄ°S",
          value: "79"
        },
        {
          name: "OSMANÄ°YE",
          value: "80"
        },
        {
          name: "DÃœZCE",
          value: "81"
        }
      ],
      cityRiskList: [
        {
          id: 0,
          name: "-",
          disabled: true
        },
        {
          id: "1",
          name: "ADANA",
          risk: 2
        },
        {
          id: "2",
          name: "ADIYAMAN",
          risk: 4
        },
        {
          id: "3",
          name: "AFYONKARAHÄ°SAR",
          risk: 2
        },
        {
          id: "4",
          name: "AÄžRI",
          risk: 1
        },
        {
          id: "5",
          name: "AMASYA",
          risk: 4
        },
        {
          id: "6",
          name: "ANKARA",
          risk: 2
        },
        {
          id: "7",
          name: "ANTALYA",
          risk: 3
        },
        {
          id: "8",
          name: "ARTVÄ°N",
          risk: 3
        },
        {
          id: "9",
          name: "AYDIN",
          risk: 2
        },
        {
          id: "10",
          name: "BALIKESÄ°R",
          risk: 4
        },
        {
          id: "11",
          name: "BÄ°LECÄ°K",
          risk: 3
        },
        {
          id: "12",
          name: "BÄ°NGÃ–L",
          risk: 1
        },
        {
          id: "13",
          name: "BÄ°TLÄ°S",
          risk: 1
        },
        {
          id: "14",
          name: "BOLU",
          risk: 3
        },
        {
          id: "15",
          name: "BURDUR",
          risk: 4
        },
        {
          id: "16",
          name: "BURSA",
          risk: 2
        },
        {
          id: "17",
          name: "Ã‡ANAKKALE",
          risk: 3
        },
        {
          id: "18",
          name: "Ã‡ANKIRI",
          risk: 2
        },
        {
          id: "19",
          name: "Ã‡ORUM",
          risk: 2
        },
        {
          id: "20",
          name: "DENÄ°ZLÄ°",
          risk: 2
        },
        {
          id: "21",
          name: "DÄ°YARBAKIR",
          risk: 1
        },
        {
          id: "22",
          name: "EDÄ°RNE",
          risk: 4
        },
        {
          id: "23",
          name: "ELAZIÄž",
          risk: 2
        },
        {
          id: "24",
          name: "ERZÄ°NCAN",
          risk: 2
        },
        {
          id: "25",
          name: "ERZURUM",
          risk: 2
        },
        {
          id: "26",
          name: "ESKÄ°ÅžEHÄ°R",
          risk: 2
        },
        {
          id: "27",
          name: "GAZÄ°ANTEP",
          risk: 2
        },
        {
          id: "28",
          name: "GÄ°RESUN",
          risk: 4
        },
        {
          id: "29",
          name: "GÃœMÃœÅžHANE",
          risk: 4
        },
        {
          id: "30",
          name: "HAKKARÄ°",
          risk: 1
        },
        {
          id: "31",
          name: "HATAY",
          risk: 2
        },
        {
          id: "32",
          name: "ISPARTA",
          risk: 2
        },
        {
          id: "33",
          name: "MERSÄ°N",
          risk: 3
        },
        {
          id: "34",
          name: "Ä°STANBUL",
          risk: 3
        },
        {
          id: "35",
          name: "Ä°ZMÄ°R",
          risk: 3
        },
        {
          id: "36",
          name: "KARS",
          risk: 2
        },
        {
          id: "37",
          name: "KASTAMONU",
          risk: 2
        },
        {
          id: "38",
          name: "KAYSERÄ°",
          risk: 3
        },
        {
          id: "39",
          name: "KIRKLARELÄ°",
          risk: 3
        },
        {
          id: "40",
          name: "KIRÅžEHÄ°R",
          risk: 2
        },
        {
          id: "41",
          name: "KOCAELÄ°"
        },
        {
          id: "42",
          name: "KONYA",
          risk: 4
        },
        {
          id: "43",
          name: "KÃœTAHYA",
          risk: 3
        },
        {
          id: "44",
          name: "MALATYA",
          risk: 2
        },
        {
          id: "45",
          name: "MANÄ°SA",
          risk: 2
        },
        {
          id: "46",
          name: "KAHRAMANMARAÅž",
          risk: 2
        },
        {
          id: "47",
          name: "MARDÄ°N",
          risk: 1
        },
        {
          id: "48",
          name: "MUÄžLA",
          risk: 3
        },
        {
          id: "49",
          name: "MUÅž",
          risk: 1
        },
        {
          id: "50",
          name: "NEVÅžEHÄ°R",
          risk: 2
        },
        {
          id: "51",
          name: "NÄ°ÄžDE",
          risk: 3
        },
        {
          id: "52",
          name: "ORDU",
          risk: 4
        },
        {
          id: "53",
          name: "RÄ°ZE",
          risk: 4
        },
        {
          id: "54",
          name: "SAKARYA",
          risk: 4
        },
        {
          id: "55",
          name: "SAMSUN",
          risk: 4
        },
        {
          id: "56",
          name: "SÄ°Ä°RT",
          risk: 1
        },
        {
          id: "57",
          name: "SÄ°NOP",
          risk: 4
        },
        {
          id: "58",
          name: "SÄ°VAS",
          risk: 2
        },
        {
          id: "59",
          name: "TEKÄ°RDAÄž",
          risk: 3
        },
        {
          id: "60",
          name: "TOKAT",
          risk: 4
        },
        {
          id: "61",
          name: "TRABZON",
          risk: 4
        },
        {
          id: "62",
          name: "TUNCELÄ°",
          risk: 2
        },
        {
          id: "63",
          name: "ÅžANLIURFA",
          risk: 1
        },
        {
          id: "64",
          name: "UÅžAK",
          risk: 1
        },
        {
          id: "65",
          name: "VAN",
          risk: 1
        },
        {
          id: "66",
          name: "YOZGAT",
          risk: 2
        },
        {
          id: "67",
          name: "ZONGULDAK",
          risk: 3
        },
        {
          id: "68",
          name: "AKSARAY",
          risk: 4
        },
        {
          id: "69",
          name: "BAYBURT",
          risk: 2
        },
        {
          id: "70",
          name: "KARAMAN",
          risk: 3
        },
        {
          id: "71",
          name: "KIRIKKALE",
          risk: 3
        },
        {
          id: "72",
          name: "BATMAN",
          risk: 1
        },
        {
          id: "73",
          name: "ÅžIRNAK",
          risk: 1
        },
        {
          id: "74",
          name: "BARTIN",
          risk: 2
        },
        {
          id: "75",
          name: "ARDAHAN",
          risk: 3
        },
        {
          id: "76",
          name: "IÄžDIR",
          risk: 1
        },
        {
          id: "77",
          name: "YALOVA",
          risk: 2
        },
        {
          id: "78",
          name: "KARABÃœK",
          risk: 2
        },
        {
          id: "79",
          name: "KÄ°LÄ°S",
          risk: 3
        },
        {
          id: "80",
          name: "OSMANÄ°YE",
          risk: 4
        },
        {
          id: "81",
          name: "DÃœZCE",
          risk: 3
        }
      ]
    };
  },
  methods: {
    formClick() {
      const now = new Date();
      if (!this.selectedCity) {
        this.cityError = true;
        this.cityErrorMessage =
          "Risk bÃ¶lgenizi bulabilmek adÄ±na ihtiyacÄ±m var ðŸ¥º";
        return;
      }
      if (!this.age) {
        this.ageError = true;
        this.ageErrorMessage =
          "Ã–nemli olan ruhumuzun genÃ§ olmasÄ± Ã§ekinmeyin ðŸ˜‡";
        return;
      }
      let isSunday = now.getDay() === 0;
      let isHoursBetween21and5 = now.getHours() >= 21 || now.getHours() < 5;
      let selectedCityRiskLevel = this.cityRiskList.find(item => {
        return item.id === this.selectedCity;
      }).risk;
      if (isHoursBetween21and5) {
        this.$router.push(`hayir/${selectedCityRiskLevel}`);
        return;
      }
      let route = this.JSON[selectedCityRiskLevel].age[this.ageCalculated].day[
        isSunday ? "sunday" : "funday"
      ];
      this.$router.push(`${route}/${selectedCityRiskLevel}`);
    },
    buttonGroupClick(e) {
      this.workStatus = e;
    }
  },
  watch: {
    age() {
      this.ageCalculated = "other";
      this.ageError = false;
      this.ageErrorMessage = "";
      if (this.age >= 65) {
        this.ageCalculated = 65;
      }
      if (this.age <= 20) {
        this.ageCalculated = 20;
      }
    },
    selectedCity(val) {
      this.cityError = false;
      this.cityErrorMessage = "";
    }
  }
};
</script>

<style>
.disari-container {
  height: 100vh;
}
.disari-row {
  height: 100%;
  justify-content: center;
  align-items: center;
}
h1 {
  margin-bottom: 20px;
}
.disari-form > label {
  margin-bottom: 15px !important;
}
.disari-submit {
  display: flex;
  justify-content: flex-end;
}

.credits {
  position: absolute;
  bottom: 0;
}
.credits {
  position: absolute;
  bottom: 0;
  display: flex;
  justify-content: center;
  flex-direction: column;
}
.text-center {
  text-align: center;
}
.banner-image {
  width: 60px;
  height: auto;
  margin: 0 auto;
  text-align: center;
  margin-bottom: 40px;
}
.banner-image-1 {
  height: 35px;
  text-align: center;
  margin-right: 10px;
}
.disari-santa {
  width: 60px;
}
.ku-c__combobox-option-container {
  top: 60px !important;
}
</style>
